<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="microzz"><link rel="alternative" href="/atom.xml" title="ECUT Club" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title> - ECUT Club</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script><!-- Hotjar Tracking Code for ochukai.me --></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">ECUT Club</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/archives" class="head-nav__link">ã‚«ã‚¿ãƒ­ã‚°/ï¼ˆç›®å½•ï¼‰</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head">  <time datetime="2017-04-19T00:24:13.256Z" class="post__time">April 19, 2017</time><h1 class="post__title"><a href="/2017/04/19/array-uniq/"></a></h1><div class="post__main echo"><hr>
<p>title: ä¸ºArrayå¯¹è±¡æ·»åŠ ä¸€ä¸ªå»é™¤é‡å¤é¡¹çš„æ–¹æ³•<br>date: 2017-04-01 22:34:16<br>tags:</p>
<ul>
<li>JavaScript</li>
<li>ES6</li>
<li>ECMAScript6</li>
<li>prototype</li>
<li>åŸå‹é“¾</li>
</ul>
<hr>
<h1 id="ä¸º-Array-å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªå»é™¤é‡å¤é¡¹çš„æ–¹æ³•"><a href="#ä¸º-Array-å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªå»é™¤é‡å¤é¡¹çš„æ–¹æ³•" class="headerlink" title="ä¸º Array å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªå»é™¤é‡å¤é¡¹çš„æ–¹æ³•"></a>ä¸º Array å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªå»é™¤é‡å¤é¡¹çš„æ–¹æ³•</h1><h2 id="è¾“å…¥ä¾‹å­"><a href="#è¾“å…¥ä¾‹å­" class="headerlink" title="è¾“å…¥ä¾‹å­"></a>è¾“å…¥ä¾‹å­</h2><pre><code class="javascript">[<span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">undefined</span>, <span class="literal">null</span>, <span class="literal">NaN</span>, <span class="number">0</span>, <span class="number">1</span>, {}, {}, <span class="string">'a'</span>, <span class="string">'a'</span>, <span class="literal">NaN</span>].uniq()
</code></pre>
<h2 id="è¾“å‡ºä¾‹å­"><a href="#è¾“å‡ºä¾‹å­" class="headerlink" title="è¾“å‡ºä¾‹å­"></a>è¾“å‡ºä¾‹å­</h2><pre><code class="javascript">[<span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">undefined</span>, <span class="literal">null</span>, <span class="literal">NaN</span>, <span class="number">0</span>, <span class="number">1</span>, {}, {}, <span class="string">'a'</span>]
</code></pre>
<h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>é¢˜ç›®è¦æ±‚ç»™ Array æ·»åŠ æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨åˆ° <code>prototype</code>ã€‚æ•°ç»„å»é‡æœ¬èº«ç®—æ³•ä¸æ˜¯å¾ˆéš¾ï¼Œä½†æ˜¯åœ¨ JavaScript ä¸­å¾ˆå¤šäººä¼šå¿½è§† <code>NaN</code> çš„å­˜åœ¨ï¼Œå› ä¸ºåœ¨ JS ä¸­ <code>NaN !== NaN</code> ã€‚ä½†æ˜¯åœ¨å»é‡ä¸­æˆ‘ä»¬åˆä¸èƒ½ä¿ç•™ä¸¤ä¸ª NaN ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œä¸€ä¸‹åˆ¤æ–­ï¼Œè¿™æ˜¯å¾ˆå¤šäººå®¹æ˜“å¿½è§†çš„ã€‚ES5çš„å®ç°å¦‚ä¸‹ï¼š</p>
<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><pre><code class="javascript"><span class="built_in">Array</span>.prototype.uniq = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{
  <span class="keyword">var</span> arr = [];
  <span class="keyword">var</span> flag = <span class="literal">true</span>;
  <span class="keyword">this</span>.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>{
    <span class="comment">// æ’é™¤ NaN (é‡è¦ï¼ï¼ï¼)</span>
    <span class="keyword">if</span> (item != item) {
      flag &amp;&amp; arr.indexOf(item) === <span class="number">-1</span> ? arr.push(item) : <span class="string">''</span>;
      flag = <span class="literal">false</span>;
    } <span class="keyword">else</span> {
      arr.indexOf(item) === <span class="number">-1</span> ? arr.push(item) : <span class="string">''</span>
    }

  });
  <span class="keyword">return</span> arr;
}
</code></pre>
<h2 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h2><p>æˆ‘ä»¬åªéœ€è¦åœ¨æ•°ç»„ä¸Šç›´æ¥è°ƒç”¨ <code>uniq</code> æ–¹æ³•å°±å¯ä»¥äº†ï¼Œå¦‚ï¼š</p>
<pre><code class="javascript">[<span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">undefined</span>, <span class="literal">null</span>, <span class="literal">NaN</span>, <span class="number">0</span>, <span class="number">1</span>, {}, {}, <span class="string">'a'</span>, <span class="string">'a'</span>, <span class="literal">NaN</span>].uniq()
</code></pre>
<p>ç»“æœä¸ºï¼š</p>
<pre><code class="javascript">[<span class="literal">false</span>, <span class="literal">true</span>, <span class="literal">undefined</span>, <span class="literal">null</span>, <span class="literal">NaN</span>, <span class="number">0</span>, <span class="number">1</span>, {}, {}, <span class="string">'a'</span>]
</code></pre>
<h2 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a>è¿›é˜¶</h2><h3 id="ES6çš„å®ç°"><a href="#ES6çš„å®ç°" class="headerlink" title="ES6çš„å®ç°"></a>ES6çš„å®ç°</h3><p>ES6æ–°å¢äº† <code>Set</code> å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„â€œé›†åˆâ€ï¼Œå®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚æ‰€ä»¥å¯ä»¥æ–¹ä¾¿å»é‡ã€‚<br>Setæœ¬èº«æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”ŸæˆSetæ•°æ®ç»“æ„ã€‚(è¯¦çœ‹ğŸ‘‰<a href="https://microzz.com/2017/01/05/set-map/" target="_blank" rel="external">Setå’ŒMapæ•°æ®ç»“æ„</a>)</p>
<p>å¦‚æœç”¨ES6ä¸º Array å¯¹è±¡æ·»åŠ ä¸€ä¸ªå»é™¤é‡å¤é¡¹çš„æ–¹æ³•ï¼Œåˆ™å¯ä»¥å¦‚ä¸‹å®ç°ï¼š</p>
<pre><code class="javascript"><span class="built_in">Array</span>.prototype.uniq = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{
  <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(<span class="keyword">this</span>));
}
</code></pre>
<p>ä»£ç ä¸­ç”¨ <code>Array.from</code> æŠŠ <code>Set</code> ç»“æ„è½¬æ¢æˆæ•°ç»„ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨å…¶ä»–æ–¹æ³•ï¼Œè¿™é‡Œä¸æ·±ç©¶ã€‚è¿™é‡Œå»é‡å…³é”®ä»£ç åªéœ€è¦ä¸€è¡Œï¼Œæ˜¯ä¸æ˜¯éå¸¸ç®€å•ï¼ŸğŸ˜„<br>å¦‚æœä½ è¦ä¼˜é›…ä¸€ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ ES6 çš„æ‰©å±•è¿ç®—ç¬¦ã€‚å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript"><span class="built_in">Array</span>.prototype.uniq = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{
  <span class="keyword">return</span> [...new <span class="built_in">Set</span>(<span class="keyword">this</span>)];
}
</code></pre>
</div></header></article><section class="reward"> <a href="#" class="btn-reward">æ‰“èµ</a><div class="reward-wrapper clearfix"><img src="/img/wechat.png"></div></section></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2016-2017 microzz</div><menu class="page-menu u-fr"><li class="page-menu__item"><a title="Previous" href="/2017/04/19/API/" class="page-menu__link icon-arrow-left"></a></li><li class="page-menu__item"><a title="Next" href="/2017/04/19/array/" class="page-menu__link icon-arrow-right"></a></li></menu></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>