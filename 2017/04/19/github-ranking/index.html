<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="microzz"><link rel="alternative" href="/atom.xml" title="ECUT Club" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title> - ECUT Club</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script><!-- Hotjar Tracking Code for ochukai.me --></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">ECUT Club</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/archives" class="head-nav__link">カタログ/（目录）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head">  <time datetime="2017-04-19T00:24:13.460Z" class="post__time">April 19, 2017</time><h1 class="post__title"><a href="/2017/04/19/github-ranking/"></a></h1><div class="post__main echo"><hr>
<p>title: Vue做一个GitHub项目排行榜<br>date: 2017-04-10 19:41:53<br>tags:</p>
<ul>
<li>Vue.js</li>
<li>SASS</li>
<li>SCSS</li>
<li>Koa2</li>
<li>ES6</li>
<li>JavaScript</li>
<li>ECMAScript6</li>
</ul>
<hr>
<h1 id="Vue做一个GitHub项目排行榜"><a href="#Vue做一个GitHub项目排行榜" class="headerlink" title="Vue做一个GitHub项目排行榜"></a>Vue做一个GitHub项目排行榜</h1><p>GitHub不同语言热门项目排行，Vue做页面展示。</p>
<h2 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h2><p>源代码地址：🔗 <a href="https://github.com/microzz/github-ranking" target="_blank" rel="external">GitHub</a><br>欢迎大家 star和fork😄</p>
<h2 id="预览地址"><a href="#预览地址" class="headerlink" title="预览地址"></a>预览地址</h2><p>在线效果预览地址：<a href="https://microzz.com/github-ranking/" target="_blank" rel="external">https://microzz.com/github-ranking/</a></p>
<h2 id="技术栈"><a href="#技术栈" class="headerlink" title="技术栈"></a>技术栈</h2><ul>
<li><strong>Vue2.0</strong>：前端页面展示。</li>
<li><strong>axios</strong>：一个基于 <code>Promise</code> 的 HTTP 库，向后端发起请求。</li>
<li><strong>Express</strong>、<strong>Koa2</strong>：因为vue-cli生成的项目是基于<strong>express</strong>的，所以在开发阶段我使用的是它，但是真正上线生产环境我换成了<strong>Koa2</strong>。</li>
<li><strong>request</strong>、<strong>request-promise</strong>：没有用Node.js原生的<code>http/https</code>模块是因为不喜欢回调函数式的异步，可读性和可维护性很差。所以选择了<strong>request</strong>+<strong>request-promise</strong>，让异步更为优雅一点。</li>
<li><strong>cheerio</strong>：服务器特别定制的，快速、灵活、实施的jQuery核心实现，抓取页面内容很方便。</li>
<li><strong>SASS</strong>(<strong>SCSS</strong>)：用SCSS做CSS预处理语言，有些地方很方便，个人很喜欢用。(详看👉<a href="https://microzz.com/2017/03/18/sass/" target="_blank" rel="external">SASS用法指南</a>)</li>
<li><strong>ES6</strong>、<strong>ES7</strong>：采用ES6语法，这是以后的趋势。自己上线的生产环境后端增加了<code>Async/await</code>，使异步更加优雅。</li>
<li><strong>Webpack</strong>：vue-cli自带Webpack，但是需要自己改造一下，比如要对 <code>build/dev-server.js</code>扩展express，增加后端请求路由(上线版本用的是Koa2)。此外需要安装sass相关loader，vue-cli已经配置好了webpack，你只需要安装依赖就可以，使用的时候只需要<code>&lt;style lang=&quot;scss&quot;&gt;&lt;/style&gt;</code>。</li>
<li><strong>flex</strong>：flex弹性布局。</li>
<li><strong>CSS3</strong>：CSS3过渡动画及样式。</li>
</ul>
<h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><ol>
<li>异步操作很容易出问题，异步处理一定要小心！要熟练掌握<code>Promise</code>、<code>Async/await</code>、<code>Generator</code>等方法。(详看👉<a href="https://microzz.com/2017/01/15/async/" target="_blank" rel="external">异步操作和Async函数</a>、<a href="https://microzz.com/2017/01/14/promise/" target="_blank" rel="external">Promise对象</a>、<a href="https://microzz.com/2017/01/13/generator/" target="_blank" rel="external">Generator 函数</a>)</li>
<li>因为访问每次爬取GitHub速度慢，性能差，所以建议使用缓存，把爬取到的数据保存为json文件或者其他缓存方式，我在上线的正式版是保存为json文件。那么这个时候就要有一个定时爬取的工具了，这里推荐<a href="https://github.com/node-schedule/node-schedule" target="_blank" rel="external">node-schedule</a>模块，很方便就能实现定时任务，查看官方文档就能简单上手了。上线版本我是每隔几个小时就爬取一次，然后保存数据，这样减轻了服务器压力，前端访问速度也大大加快。</li>
<li>GitHub貌似最多只能有10个并发，我尝试9个是正常的，10个就会报错，刚好我一次性爬取的语言数目超过数目，一看报错信息是<strong>429</strong>状态码。查信息发现：</li>
</ol>
<blockquote>
<p>&nbsp;&nbsp;&nbsp;&nbsp;429 Too Many Requests (太多请求)<br>当你需要限制客户端请求某个服务的数量，也就是限制请求速度时，该状态码就会非常有用。在此之前，有一些类似的状态码。例如“509 Bandwidth Limit Exceeded”。</p>
</blockquote>
<p>所以一定好处理好这些异步请求，不然就爬取不到信息缓存了。</p>
<h2 id="About"><a href="#About" class="headerlink" title="About"></a>About</h2><p>源代码地址：👉 <a href="https://github.com/microzz/github-ranking" target="_blank" rel="external">GitHub</a> </p>
<p>个人网站：🔗<a href="https://microzz.com/" target="_blank" rel="external">microzz-IT技术分享</a> </p>
<p>GitHub：🔗<a href="https://github.com/microzz" target="_blank" rel="external">microzz</a></p>
<h2 id="Build-Setup"><a href="#Build-Setup" class="headerlink" title="Build Setup"></a>Build Setup</h2><pre><code class="bash"><span class="comment"># install dependencies</span>
npm install

<span class="comment"># serve with hot reload at localhost:8080</span>
npm run dev

<span class="comment"># build for production with minification</span>
npm run build

<span class="comment"># build for production and view the bundle analyzer report</span>
npm run build --report
</code></pre>
</div></header></article><section class="reward"> <a href="#" class="btn-reward">打赏</a><div class="reward-wrapper clearfix"><img src="/img/wechat.png"></div></section></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2016-2017 microzz</div><menu class="page-menu u-fr"><li class="page-menu__item"><a title="Previous" href="/2017/04/19/generator/" class="page-menu__link icon-arrow-left"></a></li><li class="page-menu__item"><a title="Next" href="/2017/04/19/interview/" class="page-menu__link icon-arrow-right"></a></li></menu></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>