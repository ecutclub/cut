<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="microzz"><link rel="alternative" href="/atom.xml" title="ECUT Club" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title> - ECUT Club</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script><!-- Hotjar Tracking Code for ochukai.me --></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">ECUT Club</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/archives" class="head-nav__link">ã‚«ã‚¿ãƒ­ã‚°/ï¼ˆç›®å½•ï¼‰</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head">  <time datetime="2017-04-19T00:24:13.397Z" class="post__time">April 19, 2017</time><h1 class="post__title"><a href="/2017/04/19/extend/"></a></h1><div class="post__main echo"><hr>
<p>title: JavaScriptå®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•<br>date: 2017-03-06 21:44:25<br>tags:</p>
<ul>
<li>JavaScript</li>
<li>JS</li>
<li>ES6</li>
<li>åŸå‹é“¾</li>
</ul>
<hr>
<h1 id="JavaScriptä¸­å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•"><a href="#JavaScriptä¸­å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•" class="headerlink" title="JavaScriptä¸­å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•"></a>JavaScriptä¸­å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•</h1><h2 id="ES5ä¸­çš„å®ç°"><a href="#ES5ä¸­çš„å®ç°" class="headerlink" title="ES5ä¸­çš„å®ç°"></a>ES5ä¸­çš„å®ç°</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>JavaScript(ES5)ä¸­æ²¡æœ‰åƒJavaé‚£æ ·ç±»çš„æ¦‚å¿µï¼Œå†™æ³•è·Ÿä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€ï¼ˆæ¯”å¦‚C++å’ŒJavaï¼‰å·®å¼‚å¾ˆå¤§ï¼Œå¾ˆå®¹æ˜“è®©æ–°å­¦ä¹ è¿™é—¨è¯­è¨€çš„ç¨‹åºå‘˜æ„Ÿåˆ°å›°æƒ‘ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡åŸå‹é“¾prototypeæ¥æ¨¡æ‹Ÿç±»ï¼Œå»å®ç°ç»§æ‰¿çš„ç›¸å…³åŠŸèƒ½ã€‚ä¸‹é¢æ¥çœ‹çœ‹ES5ä¸­å®ç°ç»§æ‰¿å¸¸è§çš„ä¸‰ç§æ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><pre><code class="javascript"><span class="comment">/**
 * JavaScript(ES5)ä¸­å®ç°ç»§æ‰¿çš„å‡ ç§æ–¹æ³•
 */</span>

<span class="comment">// å®šä¹‰åŸºç±»Person</span>
<span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>{
  <span class="keyword">this</span>.name = name;
  <span class="keyword">this</span>.age = age;
}

<span class="comment">// å…±äº«æ•°æ®</span>
Person.prototype.LEGS_NUM = <span class="number">2</span>;

<span class="comment">// å…±äº«æ–¹æ³•</span>
Person.prototype.info = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{
  <span class="built_in">console</span>.log(<span class="string">'My name is '</span> + <span class="keyword">this</span>.name + <span class="string">' .I\'m '</span> + <span class="keyword">this</span>.age + <span class="string">' years old now'</span>);
};

Person.prototype.walk = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{
  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' is walking...'</span>);
};

<span class="comment">// Studentå­ç±»</span>
<span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, age, className</span>) </span>{
  <span class="comment">// è°ƒç”¨çˆ¶ç±»</span>
  Person.call(<span class="keyword">this</span>, name, age);
  <span class="keyword">this</span>.className = className;
}

<span class="comment">// 1âƒ£ï¸ æ–¹æ³•ä¸€ï¼šPerson.prototypeç›´æ¥èµ‹å€¼ç»™Student.prototype</span>
<span class="comment">// Student.prototype = Person.prototype;</span>

<span class="comment">// 2âƒ£ï¸ æ–¹æ³•äºŒï¼šStudent.prototypeä¸ºPersonçš„å®ä¾‹</span>
<span class="comment">// Student.prototype = new Person();</span>

<span class="comment">// 3âƒ£ï¸ æ–¹æ³•ä¸‰ï¼šåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¯¹è±¡çš„åŸå‹æŒ‡å‘Person.prototypeï¼Œèµ‹å€¼ç»™Student.prototype</span>
Student.prototype = <span class="built_in">Object</span>.create(Person.prototype);

Student.prototype.constructor = Student;

<span class="comment">// è¦†ç›–çˆ¶ç±»çš„infoæ–¹æ³•</span>
Student.prototype.info = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{
  <span class="built_in">console</span>.log(<span class="string">'My name is '</span> + <span class="keyword">this</span>.name + <span class="string">',I\'m '</span> + <span class="keyword">this</span>.age + <span class="string">' years old now, and from class '</span> + <span class="keyword">this</span>.className + <span class="string">'.'</span>);
};

<span class="comment">// Studentç±»çš„å…±äº«æ–¹æ³•</span>
Student.prototype.learn = <span class="function"><span class="keyword">function</span> (<span class="params">subject</span>) </span>{
  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' is learning '</span> + subject + <span class="string">'.'</span>);
};

<span class="comment">// æµ‹è¯•,åˆ›å»ºä¸€ä¸ªStudentçš„å®ä¾‹</span>
<span class="keyword">var</span> microzz = <span class="keyword">new</span> Student(<span class="string">'Microzz'</span>, <span class="number">22</span>, <span class="number">5</span>);
microzz.info(); <span class="comment">// My name is Microzz,I'm 22 years old now, and from class 5.</span>
<span class="built_in">console</span>.log(microzz.LEGS_NUM); <span class="comment">// 2</span>
microzz.walk(); <span class="comment">// Microzz is walking...</span>
microzz.learn(<span class="string">'JavaScript'</span>); <span class="comment">// Microzz is learning JavaScript.</span>
<span class="built_in">console</span>.log(microzz.__proto__.__proto__ === Person.prototype); <span class="comment">// true</span>
<span class="built_in">console</span>.log(microzz.__proto__ === Student.prototype); <span class="comment">// true</span>
<span class="built_in">console</span>.log(microzz.__proto__.constructor === Student); <span class="comment">// true</span>
</code></pre>
<h3 id="ä¸‰ç§æ–¹æ³•æ¯”è¾ƒ"><a href="#ä¸‰ç§æ–¹æ³•æ¯”è¾ƒ" class="headerlink" title="ä¸‰ç§æ–¹æ³•æ¯”è¾ƒ"></a>ä¸‰ç§æ–¹æ³•æ¯”è¾ƒ</h3><p>ä¸Šé¢ä»£ç ä¸­æœ‰ä¸‰ç§æ–¹æ³•å®ç°ç»§æ‰¿ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥æ¥åˆ†æä¸€ä¸‹è¿™å‡ ç§æ–¹æ³•ã€‚<br>1âƒ£ï¸è¿™ç§æ–¹æ³•ä¸­ï¼ŒPerson.prototypeç›´æ¥èµ‹å€¼ç»™Student.prototypeï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ï¼Œå¦‚æœå­ç±»prototypeæ·»åŠ æ–°çš„ä¸œè¥¿çš„è¯ä¹Ÿä¼šæ”¹å†™çˆ¶ç±»ã€‚æ‰€ä»¥è¿™ç§æ–¹æ³•ä¸æ¨èã€‚<br>2âƒ£ï¸ç¬¬äºŒç§æ–¹æ³•Student.prototypeä¸ºPersonçš„å®ä¾‹ï¼Œè¿™ä¹Ÿæ˜¯å¯ä»¥å®ç°çš„ã€‚ä½†æ˜¯Personæ„é€ å‡½æ•°æœ‰å‚æ•°åº”è¯¥ä¼ ä»€ä¹ˆå‘¢ï¼Ÿä¼ ä»»ä½•ä¸€ä¸ªéƒ½æ˜¯å¾ˆå¥‡æ€ªçš„ã€‚æ‰€ä»¥ä¹Ÿä¸æ¨èã€‚<br>3âƒ£ï¸ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯æ¯”è¾ƒç†æƒ³çš„ï¼Œåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¯¹è±¡çš„åŸå‹æŒ‡å‘Person.prototypeï¼Œèµ‹å€¼ç»™Student.prototypeã€‚ä½†æ˜¯Object.createä¹Ÿæœ‰ä¸€ç‚¹å°ç‘•ç–µï¼Œå› ä¸ºå®ƒæ˜¯ES5ä¹‹åæ‰æ”¯æŒçš„ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¨¡æ‹Ÿå®ç°Object.createæ–¹æ³•ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="javascript"><span class="keyword">if</span> (!<span class="built_in">Object</span>.create) {
  <span class="built_in">Object</span>.prototype.create = <span class="function"><span class="keyword">function</span> (<span class="params">proto</span>) </span>{
    <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>{}
    F.prototype = proto;
    <span class="keyword">return</span> <span class="keyword">new</span> F;
  }
}
</code></pre>
<p>è¿™æ ·åœ¨ES5ä¸­å°±å®Œç¾å®ç°äº†ç»§æ‰¿ğŸ˜„</p>
<h2 id="ES6ä¸­çš„å®ç°"><a href="#ES6ä¸­çš„å®ç°" class="headerlink" title="ES6ä¸­çš„å®ç°"></a>ES6ä¸­çš„å®ç°</h2><h3 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>ES6æä¾›äº†æ›´æ¥è¿‘ä¼ ç»Ÿè¯­è¨€â€ç±»â€çš„å†™æ³•ï¼Œå¼•å…¥äº†Classï¼ˆç±»ï¼‰è¿™ä¸ªæ¦‚å¿µï¼Œä½œä¸ºå¯¹è±¡çš„æ¨¡æ¿ã€‚é€šè¿‡classå…³é”®å­—ï¼Œå¯ä»¥å®šä¹‰ç±»ã€‚åŸºæœ¬ä¸Šï¼ŒES6çš„classå¯ä»¥çœ‹ä½œåªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå®ƒçš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼ŒES5éƒ½å¯ä»¥åšåˆ°ï¼Œæ–°çš„classå†™æ³•åªæ˜¯è®©å¯¹è±¡åŸå‹çš„å†™æ³•æ›´åŠ æ¸…æ™°ã€æ›´åƒé¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­æ³•è€Œå·²ã€‚ä¸‹é¢æˆ‘ä»¬ç”¨ES6çš„è¯­æ³•å®ç°ç±»çš„ç»§æ‰¿ã€‚</p>
<h3 id="ä»£ç -1"><a href="#ä»£ç -1" class="headerlink" title="ä»£ç "></a>ä»£ç </h3><pre><code class="javascript"><span class="comment">// åŸºç±» Person</span>
<span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>{
  <span class="comment">// çˆ¶ç±»çš„æ„é€ æ–¹æ³•</span>
  <span class="keyword">constructor</span>(name, age) {
    <span class="keyword">this</span>.name = name;
    <span class="keyword">this</span>.age = age;
    <span class="comment">// å…±äº«å˜é‡</span>
    <span class="keyword">this</span>.LEGS_NUM = <span class="number">2</span>;
  }
  <span class="comment">// çˆ¶ç±»çš„infoæ–¹æ³•</span>
  info() {
    <span class="built_in">console</span>.log(<span class="string">`My name is <span class="subst">${<span class="keyword">this</span>.name}</span>, I\'m <span class="subst">${<span class="keyword">this</span>.age}</span> years old now.`</span>);
  }

  <span class="comment">// çˆ¶ç±»çš„walkæ–¹æ³•</span>
  walk() {
    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">' is walking...'</span>);
  }

}

<span class="comment">// å­ç±» Student</span>
<span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>{
  <span class="keyword">constructor</span>(name, age, className) {
    <span class="comment">// è°ƒç”¨åŸºç±»çš„æ„é€ æ–¹æ³•</span>
    <span class="keyword">super</span>(name, age);
    <span class="keyword">this</span>.className = className;
  }

  <span class="comment">// è¦†ç›–çˆ¶ç±»çš„infoæ–¹æ³•</span>
  info() {
    <span class="built_in">console</span>.log(<span class="string">`My name is <span class="subst">${<span class="keyword">this</span>.name}</span>, I\'m <span class="subst">${<span class="keyword">this</span>.age}</span> years old, and from class <span class="subst">${<span class="keyword">this</span>.className}</span>.`</span>);
  }
}

<span class="comment">// å®ä¾‹åŒ–ä¸€ä¸ªStudentçš„å®ä¾‹</span>
<span class="keyword">let</span> stu = <span class="keyword">new</span> Student(<span class="string">'Zhaohui'</span>, <span class="number">22</span>, <span class="number">5</span>);
stu.info(); <span class="comment">// My name is Zhaohui, I'm 22 years old, and from class 5.</span>
stu.walk(); <span class="comment">// Zhaohui is walking...</span>
<span class="built_in">console</span>.log(stu.LEGS_NUM); <span class="comment">// 2</span>
<span class="built_in">console</span>.log(stu <span class="keyword">instanceof</span> Student); <span class="comment">// true</span>
<span class="built_in">console</span>.log(stu <span class="keyword">instanceof</span> Person); <span class="comment">// true</span>
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±é€šè¿‡ES6ä¸­çš„classå®ç°äº†â€œç±»â€çš„ç»§æ‰¿äº†ğŸ˜„</p>
</div></header></article><section class="reward"> <a href="#" class="btn-reward">æ‰“èµ</a><div class="reward-wrapper clearfix"><img src="/img/wechat.png"></div></section></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2016-2017 microzz</div><menu class="page-menu u-fr"><li class="page-menu__item"><a title="Previous" href="/2017/04/19/es6-style/" class="page-menu__link icon-arrow-left"></a></li><li class="page-menu__item"><a title="Next" href="/2017/04/19/flow-info/" class="page-menu__link icon-arrow-right"></a></li></menu></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>